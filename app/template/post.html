{% extends "layouts/base.html" %}

{% block title %} {{ post.title }} {% endblock title %}

{% block content %}

    <div class="post">
        <div class="heading">
            <h1 class="title">{{ post.title }}</h1>
            <p class="subtitle">{{ post.subtitle }}</p>

            {% if user.is_authenticated and user == post.author %}
            <div id="postaction">
                <div class="pill circle edit">
                    <a href="{% url 'edit' post.id %}">Edit</a>
                </div>
                <div class="pill circle del">
                    <a class="confirm" href="{% url 'delete' post.id %}">Del</a>
                </div>
            </div>
            {% endif %}
        </div>
        <div class="author">
            <div class="profile">
                <img class="circlepic" src="/static{{ post.author.pic.url }}" alt="profile picture">
            </div>
            <div>
                <a href="{% url 'user' post.author.username %}">{{ post.author.username }}</a>
                <p>{{ post.date }}</p>
                <p>Updated {{ post.updated }}</p>
            </div>
        </div>
        <div class="meta">
            <!-- TODO: comments count -->
            <div class="pill">
                <!-- <span class="icon is-small"><i class="fas fa-eye"></i></span> -->
                <p>{{ post.views }} views</p>
            </div>
            <div class="pill">
                <!-- <span class="icon is-small"><i class="fas fa-heart"></i></span> -->
                {% if user.is_authenticated %}
                <form id="like" action="{% url 'like' post.id %}" method="post">
                    {% csrf_token %}
                    <a onClick="this.closest('form').submit()" >{{ post.likes }} {% if post.likes == 0 or post.likes > 1 %}likes{% else %}like{% endif %}</a>
                </form>
                {% else %}
                <p>{{ post.likes }} likes</p>
                {% endif %}
            </div>
            <div id="share" class="pill far-right">
                <!-- <span class="icon is-small"><i class="fas fa-share"></i></span> -->
                <a>Share</a>
                <span id="copied" class="pill">Copied</span>
            </div>
        </div>

        {% if not nosplash %}
        <figure class="splash">
            <img src="/static{{ post.splash.url }}" alt="{{ post.splashdesc }}">
            {% if post.splashdesc %}<figcaption>{{ post.splashdesc }}</figcaption>{% endif %}
        </figure>
        {% endif %}

        <article>
            {{ post.text }}
        </article>
    </div>

{% endblock content %}
